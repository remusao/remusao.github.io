<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Install IHaskell on Ubuntu 14.04 with Stack</title><meta name="description" content="Simplex Sigillum Veri"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="canonical" href="https://remusao.github.io/posts/ihaskell-ubuntu-14-04-install.html"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><style type="text/css">@font-face{font-display:swap;font-family:'Open Sans';font-style:italic;font-weight:400;src:url(/fonts/OpenSans_italic_400.woff2) format('woff2')}@font-face{font-display:swap;font-family:'Open Sans';font-style:italic;font-weight:700;src:url(/fonts/OpenSans_italic_700.woff2) format('woff2')}@font-face{font-display:swap;font-family:'Open Sans';font-style:normal;font-weight:400;src:url(/fonts/OpenSans_normal_400.woff2) format('woff2')}@font-face{font-display:swap;font-family:'Open Sans';font-style:normal;font-weight:700;src:url(/fonts/OpenSans_normal_700.woff2) format('woff2')}body{color:#2f2f2f;font-family:'Open Sans',sans-serif;font-size:95%;line-height:1.6em;margin:20px auto;max-width:42em;padding:0 1em}@media (min-width:760px){body{font-size:100%}}@media (min-width:1024px){body{font-size:105%}}h1,h2,h3{font-size:1.7em;font-weight:400;padding-top:.7em}h2,h3{font-size:1.5em}h3{font-size:1.2em}.header,.main figcaption{color:#555;font-style:italic}.main a{color:#3465a4}.main a:visited{color:#75507b}.main figcaption{color:#696f72;line-height:2em;text-align:center}.main img{display:block;height:auto;margin:auto;padding-bottom:1em;padding-top:1em;width:90%}.main blockquote{border-left:thin solid #d3d7cf;color:#555;margin:10px;padding:0 0 0 1em}@font-face{font-display:swap;font-family:'Inconsolata';font-style:normal;font-weight:400;src:url(/fonts/Inconsolata.woff2) format('truetype')}code{background-color:#f3f4f5;font-family:'Inconsolata';line-height:1.2em}pre code{display:block;overflow-x:auto;padding:8px}.leave-comment-btn,summary{font-size:15px;font-weight:600}.leave-comment-btn{background-color:#28a745;background-image:linear-gradient(-180deg,#34d058,#28a745 90%);border:1px solid rgba(27,31,35,.2);border-radius:.25em;color:#fff;display:inline-block;margin-top:1.5em;padding:3px 10px;text-decoration:none}.leave-comment-btn:hover{box-shadow:0 1px 3px rgba(0,0,0,.24)}summary{color:#516ae8;cursor:pointer;line-height:1.2rem;margin-top:2rem}.comments-list{list-style:none;padding:0}.comment{background-color:#fff;border:1px solid #d1d5da;border-radius:3px;color:#24292e;font-size:15px;margin:1em 0}.meta{background-color:#f6f8fa;border-bottom:1px solid #d1d5da;color:#586069}.author,.date{text-decoration:none}.author{color:#24292e!important;font-weight:700}.date{color:#586069}.date:hover{color:#0366d6}.content{padding-left:20px}.avatar,.emoji{vertical-align:middle}.avatar{display:inline-block;margin-right:5px}.emoji{height:1.1em;width:1.1em}table{border-collapse:collapse;margin:auto}td,th{border:1px solid #ddd;padding:10px}tr:hover{background-color:#f5f5f5}footer{border-top:thin solid #d3d7cf;margin:1.5em 0}.share ul{text-align:right}.share li{display:inline;padding:0 5px}.share img{width:2em}.main a,header a{text-decoration:none}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag{color:#333;font-weight:700}.hljs-subst{color:#333}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><main><header><h1><a href="../"><span>../</span></a></h1></header><h1>Install IHaskell on Ubuntu 14.04 with Stack</h1><section class="header"><div>2016-01-07 | <em>Reading time: ~4 minutes</em></div></section><article><div class="main"><p>In this post, we’re going through the installation of IHaskell on GNU/Linux (Ubuntu 14.04 in my case, though it should be pretty similar on other ditributions) step-by-step. We’ll see how the use of <em>Stack</em> will simplify the whole process, and how to get all the dependencies right!</p><h2 id="install-stack">Install Stack</h2><p>From <em>Stack</em> official <a href="http://docs.haskellstack.org/en/stable/install_and_upgrade.html">documentation</a>, for Ubuntu 14.04:</p><pre><code class="language-sh">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 575159689BEFB442
<span class="hljs-built_in">echo</span> <span class="hljs-string">'deb http://download.fpcomplete.com/ubuntu trusty main'</span> \
    |sudo tee /etc/apt/sources.list.d/fpco.list
sudo apt-get update &amp;&amp; sudo apt-get install stack -y</code></pre><p>You should now be able to run the <code>stack</code> executable in a shell:</p><pre><code class="language-sh">stack --<span class="hljs-built_in">help</span></code></pre><p>Being up-to-date is important, so setup your <em>Stack</em> global configuration <code>~/.stack/global/stack.yaml</code>:</p><pre><code class="language-yaml"><span class="hljs-attr">flags:</span> <span class="hljs-string">{}</span>
<span class="hljs-attr">resolver:</span> <span class="hljs-string">lts-4.0</span>
<span class="hljs-attr">packages:</span> <span class="hljs-string">[]</span>
<span class="hljs-attr">extra-deps:</span> <span class="hljs-string">[]</span></code></pre><p>Tell <em>Stack</em> to setup everything (download package list, install latest <em>GHC</em> release, etc.):</p><pre><code class="language-sh">stack setup</code></pre><p>Note that you can lookup the latest release of stackage at anytime on this <a href="http://www.stackage.org/lts">page</a>.</p><h2 id="install-zeromq-latest-version">Install ZeroMQ latest version</h2><p>If you try to install IHaskell directly, you’ll get an error since Ubuntu 14.04 ships with an older version of ZeroMQ. We need a more recent release. There are several ways to install it:</p><ol><li>Compile it from source</li><li>Use Nix</li></ol><p>We’re going to compile it from source. I’ll follow the way of the official <a href="https://github.com/gibiansky/IHaskell#install-zeromq">README</a>:</p><pre><code class="language-sh"><span class="hljs-comment"># Compiling from source:</span>
git <span class="hljs-built_in">clone</span> git@github.com:zeromq/zeromq4-x.git libzmq
<span class="hljs-built_in">cd</span> libzmq
./autogen.sh &amp;&amp; ./configure &amp;&amp; make
sudo make install
sudo ldconfig</code></pre><p>That will do the trick! If you don’t like to install packages in global scope, feel free to install it in a user folder (Add the <code>--prefix=LOCATION</code> directive to <code>./configure</code>, and change <code>LD_LIBRARY_PATH</code> and <code>PATH</code> in your shell configuration accordingly).</p><h2 id="install-sipythons-jupyter">Install <s>IPython</s> Jupyter</h2><p><strong>EDIT</strong>: Following Florian’s comment, it appears that <em>IPython</em> is now officialy named <em>Jupyter</em>, so we might as well install it in our virtualenv. The only change in the instructions is to replace <code>pip install ipython</code> by <code>pip install jupyter</code> (Note that <em>IPython</em> is a dependency of <em>Jupyter</em>).</p><p>IHaskell requires a <s>version of <em>IPython &gt; 3.0.0 or up</em></s> recent version of <em>Jupyter</em>, so we need to install it ourselves. There are several options:</p><ol><li>Use pip and install it globaly (<s><em>pip install ipython</em></s><code>pip install jupyter</code>)</li><li>Use pip and install it in a virtualenv (<strong>This is what we will do here</strong>)</li><li>Use <a href="https://nixos.org/nix/">nix</a> <em>(You’re on your own)</em></li><li>Use <a href="https://www.continuum.io/downloads">conda</a> (<s><em>conda update ipython</em></s><code>conda update jupyter</code>)</li></ol><p>If you’re on a fresh install: <code>sudo apt-get install python-virtualenv python-dev ncurses-base</code></p><p>With <code>virtualenv</code>:</p><pre><code class="language-sh">virtualenv venv-ihaskell
<span class="hljs-built_in">source</span> venv-ihaskell/bin/activate</code></pre><p>With <code>virtualenvwrapper</code>:</p><pre><code class="language-sh">mkvirtualenv ihaskell
workon ihaskell</code></pre><p>Now we install <s><em>ipython</em></s> <em>Jupyter</em>:</p><pre><code class="language-sh">pip install jupyter</code></pre><h2 id="install-ihaskell">Install IHaskell</h2><p>Nothing simpler, just use <em>Stack</em>:</p><pre><code class="language-sh">stack build ihaskell</code></pre><p>You may want to install extra packages to enhance <em>IHaskell</em> capabilities. Here are the ones supported by Stackage:</p><ul><li>ihaskell-aeson</li><li>ihaskell-blaze</li><li>ihaskell-charts</li><li>ihaskell-diagrams</li><li>ihaskell-rlangqq</li><li>ihaskell-magic</li><li>ihaskell-juicypixels</li><li>ihaskell-hatex</li><li>ihaskell-basic</li></ul><p>Some others are not in the LTS snapshot of Stackage, but could be useful in the future. I don’t know about the current maturity of these packages:</p><ul><li>ihaskell-widgets (conflict with current version of singletons)</li><li>ihaskell-parsec (conflict with current version of aeson)</li><li>ihaskell-plot</li></ul><h2 id="setup-ihaskell">Setup IHaskell</h2><p>If everything went well, you should have <em>Jupyter</em> (latest version) and <em>ihaskell</em> installed properly. The last step is to install the <em>IHaskell Kernel</em> into <em>Jupyter</em>.</p><pre><code class="language-sh">stack <span class="hljs-built_in">exec</span> ihaskell -- install</code></pre><p>Now run the notebook server and enjoy:</p><pre><code class="language-sh">stack <span class="hljs-built_in">exec</span> jupyter -- notebook</code></pre><p>Open your browser and go to: <code>http://localhost:8000</code></p><h2 id="whats-next">What’s next</h2><p>Thanks to Stack, the install process went very smoothely (appart from some dependency we had to install ourselves). Using IPython with a Haskell Kernel I believe writing about Haskell will be a much pleasant experience since it’s really easy to export a notebook either in HTML or Markdown.</p></div><div class="comments"></div></article><footer><div class="share"><ul><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://remusao.github.io//posts/ihaskell-ubuntu-14-04-install.html&t=Install IHaskell on Ubuntu 14.04 with Stack" title="Share on Facebook" target="_blang" rel="noopener noreferrer"><img loading="lazy" alt="Share on Facebook" src="/images/social_flat_rounded_rects_svg/Facebook.svg"><a></a></li><li><a href="https://twitter.com/share?url=https://remusao.github.io//posts/ihaskell-ubuntu-14-04-install.html&text=Install IHaskell on Ubuntu 14.04 with Stack&via=Pythux" title="Tweet" target="_blang" rel="noopener noreferrer"><img loading="lazy" alt="Tweet" src="/images/social_flat_rounded_rects_svg/Twitter.svg"><a></a></li><li><a href="https://getpocket.com/save?url=https://remusao.github.io//posts/ihaskell-ubuntu-14-04-install.html&title=Install IHaskell on Ubuntu 14.04 with Stack" title="Add to Pocket" target="_blang" rel="noopener noreferrer"><img loading="lazy" alt="Add to Pocket" src="/images/social_flat_rounded_rects_svg/Pocket.svg"><a></a></li><li><a href="https://news.ycombinator.com/submitlink?u=https://remusao.github.io//posts/ihaskell-ubuntu-14-04-install.html&t=Install IHaskell on Ubuntu 14.04 with Stack" title="Submit to Hacker News" target="_blang" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Hacker News" src="/images/social_flat_rounded_rects_svg/HackerNews.svg"><a></a></li><li><a href="https://www.reddit.com/submit?url=https://remusao.github.io//posts/ihaskell-ubuntu-14-04-install.html&title=Install IHaskell on Ubuntu 14.04 with Stack" title="Submit to Reddit" target="_blang" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Reddit" src="/images/social_flat_rounded_rects_svg/Reddit.svg"><a></a></li></ul></div></footer></main></body></html>