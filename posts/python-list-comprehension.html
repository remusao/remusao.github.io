<!DOCTYPE html><html lang="fr" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Python—Construction des listes</title><meta name="description" content="Simplex Sigillum Veri"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="canonical" href="https://remusao.github.io/posts/python-list-comprehension.html"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><style type="text/css">body{color:#2f2f2f;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.6em;margin:20px auto;max-width:40rem;padding:0 1.5em;text-rendering:optimizeLegibility}h1{line-height:1.1em}h2{border-bottom:1px solid #eaecef;padding-bottom:.5em}h1,h2,h3{padding-top:.7em}.header{color:#555;margin-top:-.8em}.main a{color:#3465a4}.main a:visited{color:#75507b}.main figcaption{color:#696f72;font-style:italic;line-height:2em;text-align:center}.main img{display:block;height:auto;margin:auto;padding-bottom:1em;padding-top:1em;width:90%}.main blockquote{border-left:thin solid #d3d7cf;color:#555;margin:10px;padding:0 0 0 1em}code{background-color:#f6f8fa;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:14px;line-height:20px;padding:.2em .4em}pre code{display:block;overflow-x:auto}.leave-comment-btn,summary{font-size:16px;font-weight:600}.leave-comment-btn{background-color:#28a745;background-image:linear-gradient(-180deg,#34d058,#28a745 90%);border:1px solid rgba(27,31,35,.2);border-radius:.25em;color:#fff;display:inline-block;margin-top:1.5em;padding:3px 10px;text-decoration:none}.leave-comment-btn:hover{box-shadow:0 1px 3px rgba(0,0,0,.24)}summary{color:#516ae8;cursor:pointer;line-height:1.2rem;margin-top:2rem}.comments-list{list-style:none;padding:0}.comment{background-color:#fff;border:1px solid #d1d5da;border-radius:3px;color:#24292e;font-size:16px;margin:1em 0}.meta{background-color:#f6f8fa;border-bottom:1px solid #d1d5da;color:#586069}.author,.date{text-decoration:none}.author{color:#24292e!important;font-weight:700}.date{color:#586069}.date:hover{color:#0366d6}.content{padding-left:20px}.avatar,.emoji{vertical-align:middle}.avatar{display:inline-block;margin-right:5px}.emoji{height:1.1em;width:1.1em}table{border-collapse:collapse;margin:auto}td,th{border:1px solid #ddd;padding:10px}tr:hover{background-color:#f5f5f5}footer{border-top:thin solid #d3d7cf;margin:1.5em 0}.share ul{text-align:right}.share li{display:inline;padding:0 5px}.share img{width:2em}.main a,header a{text-decoration:none}.hljs{background:#f8f8f8;color:#333;display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#6a737d;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#d73a49}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:#005cc5}.hljs-doctag,.hljs-string{color:#032f62}.hljs-section,.hljs-selector-id,.hljs-title{color:#900}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#6f42c1}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><main><header><h1><a href="../"><span>../</span></a></h1></header><h1>Python—Construction des listes</h1><section class="header"><div>└─ 2012-02-02 • <em>Reading time: ~3 minutes</em></div></section><article><div class="main"><p>Le type liste du langage python est une des structures les plus utiles (et utilisées). Elles sont polyvalentes et efficaces. En effet, on peut aussi bien s’en servir comme tableau, file, pile, listes, etc.. L’outil à tout faire en quelques sorte. Mais leur utilité et leur « beauté » ne s’arrête pas là, car en plus de fournir de nombreuses méthodes utiles, le programmeur a la possibilité de construire des listes de manière très élégante. Voyons voir de plus près de quoi il s’agit !</p><p>Les listes étant représentées entre crochet <code>[</code> et <code>]</code>, c’est tout naturellement avec ce formalisme que nous allons les créer, en plaçant entre les crochets des « motifs » décrivant les éléments contenus dans la liste. Voyons sans plus tarder un exemple :</p><pre><code class="language-python">l = [x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)]
&gt;&gt; [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>]</code></pre><p>Nous pouvons bien sûr imaginer des exemples plus complexes comme la génération de tous les couples de nombres <code>(x, y)</code> avec <code>x</code> et <code>y</code> compris entre <code>1</code> et <code>9</code> :</p><pre><code class="language-python">l = [(x, y) <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>) <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)]</code></pre><p>Il est également possible de rajouter des conditions sur les éléments avec lesquels nous construisons les listes :</p><pre><code class="language-python">l = [x*x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>) <span class="hljs-keyword">if</span> x % <span class="hljs-number">2</span> == <span class="hljs-number">0</span>]</code></pre><p>Ce dernier exemple génère la liste contenant les carrés de tous les nombres pairs compris entre 1 et 10. Vous commencez à comprendre ? Ce qui est drôle, c’est qu’on peut utiliser des constructions de liste dans des constructions de liste. Ainsi on peut facilement générer des matrice (listes de listes) :</p><pre><code class="language-python">l = [[x * y <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)] <span class="hljs-keyword">for</span> y <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)]</code></pre><p>Je vous laisse entrer cette ligne dans un interpréteur Python pour voir ce que cela donne. On peut ainsi créer des listes contenant a peu près n’importe quoi avec cette notation. Cette dernière étant beaucoup plus compacte qu’une ou plusieurs boucles ‘for’, on gagne beaucoup en lisibilité et compacité en les utilisant. Je précise également que ce genre de constructions est également disponible pour d’autres structures de données du Python (notamment les set et les dictionnaires) :</p><pre><code class="language-python">s = {x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)}    <span class="hljs-comment"># crée un set</span>
d = {x : x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)}  <span class="hljs-comment"># crée un dictionnaire</span></code></pre><p>Il y a donc de quoi s’amuser :) Toutefois, attention à ne pas les utiliser lorsque ce n’est pas nécessaire. Imaginons que vous souhaitiez initialiser une liste avec 1M éléments ayant tous la même valeur (disons True). Les deux manières suivantes sont équivalentes :</p><pre><code class="language-python">l = [<span class="hljs-literal">True</span> <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>, <span class="hljs-number">1000000</span>)]
l = [<span class="hljs-literal">True</span>] * <span class="hljs-number">100000</span></code></pre><p>Bien que produisant le même résultat, la deuxième méthode est plus rapide que la première, attention donc de ne pas abuser des constructions de liste :)</p><p><strong>Édition du 5 février 2012</strong> :</p><p>Dans tous les exemples précédents, c’est la fonction range qui a été utilisée pour illustrer les constructions de listes. Sachez qu’il est possible d’utiliser n’importe quel générateur à la place, et même n’importe quelle structure de données itérable (par exemple : une liste, un set, etc..).</p></div><div class="comments"></div></article><footer><div class="share"><ul><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://remusao.github.io//posts/python-list-comprehension.html&t=Python—Construction des listes" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Share on Facebook" src="/images/social_flat_rounded_rects_svg/Facebook.svg"><a></a></li><li><a href="https://twitter.com/share?url=https://remusao.github.io//posts/python-list-comprehension.html&text=Python—Construction des listes&via=Pythux" title="Tweet" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Tweet" src="/images/social_flat_rounded_rects_svg/Twitter.svg"><a></a></li><li><a href="https://getpocket.com/save?url=https://remusao.github.io//posts/python-list-comprehension.html&title=Python—Construction des listes" title="Add to Pocket" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Add to Pocket" src="/images/social_flat_rounded_rects_svg/Pocket.svg"><a></a></li><li><a href="https://news.ycombinator.com/submitlink?u=https://remusao.github.io//posts/python-list-comprehension.html&t=Python—Construction des listes" title="Submit to Hacker News" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Hacker News" src="/images/social_flat_rounded_rects_svg/HackerNews.svg"><a></a></li><li><a href="https://www.reddit.com/submit?url=https://remusao.github.io//posts/python-list-comprehension.html&title=Python—Construction des listes" title="Submit to Reddit" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Reddit" src="/images/social_flat_rounded_rects_svg/Reddit.svg"><a></a></li></ul></div></footer></main></body></html>