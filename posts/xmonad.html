<!DOCTYPE html><html lang="fr" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>XMonad</title><meta name="description" content="Simplex Sigillum Veri"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="canonical" href="https://remusao.github.io/posts/xmonad.html"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><style type="text/css">.sharing-facebook{background-image:url(data:image/svg+xml;utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2232%22%20width%3D%2232%22%3E%3Crect%20height%3D%2232%22%20rx%3D%224%22%20ry%3D%224%22%20width%3D%2232%22%20fill%3D%22%233b5998%22%2F%3E%3Cpath%20d%3D%22M17.936%2028.5V17.096h3.827l.574-4.444h-4.402V9.815c0-1.287.358-2.164%202.203-2.164h2.353V3.675c-.407-.055-1.804-.176-3.43-.176-3.392%200-5.715%202.072-5.715%205.875v3.278H9.51v4.443h3.838V28.5z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat}.sharing-pocket,.sharing-twitter{background-image:url(data:image/svg+xml;utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2232%22%20width%3D%2232%22%3E%3Crect%20height%3D%2232%22%20rx%3D%224%22%20ry%3D%224%22%20width%3D%2232%22%20fill%3D%22%2300abf1%22%2F%3E%3Cpath%20d%3D%22M28.5%208.246a10.249%2010.249%200%2001-2.945.808%205.148%205.148%200%20002.255-2.837%2010.272%2010.272%200%2001-3.258%201.244%205.12%205.12%200%2000-3.743-1.62%205.13%205.13%200%2000-4.997%206.299A14.562%2014.562%200%20015.241%206.78a5.104%205.104%200%2000-.695%202.579%205.125%205.125%200%20002.282%204.269%205.115%205.115%200%2001-2.323-.641v.064a5.133%205.133%200%20004.114%205.03%205.163%205.163%200%2001-1.351.18c-.33%200-.653-.034-.966-.093a5.134%205.134%200%20004.791%203.562%2010.288%2010.288%200%2001-6.37%202.195c-.413%200-.821-.024-1.223-.072a14.516%2014.516%200%20007.863%202.305c9.434%200%2014.593-7.816%2014.593-14.593%200-.223-.006-.444-.015-.664a10.427%2010.427%200%20002.56-2.655z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat}.sharing-pocket{background-image:url(data:image/svg+xml;utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2232%22%20width%3D%2232%22%3E%3Crect%20height%3D%2232%22%20rx%3D%224%22%20ry%3D%224%22%20width%3D%2232%22%20fill%3D%22%23e84352%22%2F%3E%3Cpath%20d%3D%22M24.297%205.554H7.703c-1.631%200-2.953%201.332-2.953%202.976v8.243c0%20.153.012.303.034.45a6.366%206.366%200%2000-.034.666c0%204.725%205.037%208.557%2011.25%208.557s11.25-3.832%2011.25-8.557a6.71%206.71%200%2000-.034-.666c.022-.147.034-.297.034-.45V8.53c0-1.644-1.324-2.976-2.953-2.976zM22.9%2013.841l-5.811%205.81a1.49%201.49%200%2001-1.07.438%201.489%201.489%200%2001-1.107-.438l-5.81-5.81a1.494%201.494%200%20012.112-2.112L16%2016.516l4.787-4.787a1.494%201.494%200%20012.112%200%201.493%201.493%200%20010%202.112z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E)}.sharing-hackernews,.sharing-reddit{background-image:url(data:image/svg+xml;utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2232%22%20width%3D%2232%22%3E%3Crect%20height%3D%2232%22%20rx%3D%224%22%20ry%3D%224%22%20width%3D%2232%22%20fill%3D%22%23f68423%22%2F%3E%3Cpath%20d%3D%22M6.796%204.124l7.656%2015.157v8.595h3.114V19.28l7.638-15.157h-3.382l-5.82%2011.412-5.598-11.412z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat}.sharing-reddit{background-image:url(data:image/svg+xml;utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20height%3D%2232%22%20width%3D%2232%22%3E%3Crect%20height%3D%2232%22%20rx%3D%224%22%20ry%3D%224%22%20width%3D%2232%22%20fill%3D%22%23ef4623%22%2F%3E%3Cpath%20d%3D%22M21.374%2016.93a1.385%201.385%200%2001.094.504c0%20.34-.118.672-.315.942a1.495%201.495%200%2001-.798.565l-.006.002-.004.002a1.428%201.428%200%2001-.464.076%201.648%201.648%200%2001-1.006-.354%201.513%201.513%200%2001-.566-.92v-.005l-.001-.003a1.382%201.382%200%2001-.031-.293c0-.328.112-.643.296-.903a1.553%201.553%200%2001.746-.57h.003l.002-.002a1.535%201.535%200%2001.533-.096%201.664%201.664%200%2001.919.28c.268.178.485.44.595.764l.002.006.002.005h-.001zm-1%204.027a.797.797%200%2000-.432-.134.679.679%200%2000-.375.114%207.275%207.275%200%2001-3.693%201.02c-.968%200-1.93-.203-2.8-.632l-.005-.002-.005-.001c-.13-.054-.28-.168-.444-.278a1.653%201.653%200%2000-.266-.146.795.795%200%2000-.312-.07.697.697%200%2000-.288.066l-.015.006a.702.702%200%2000-.347.29.834.834%200%2000-.02.825.71.71%200%2000.286.287c1.246.84%202.712%201.221%204.185%201.22a9.127%209.127%200%20003.852-.867l.006-.003.006-.003c.157-.093.365-.176.562-.298a1.27%201.27%200%2000.273-.226.856.856%200%2000.184-.342.697.697%200%2000-.05-.486.845.845%200%2000-.301-.34zm-8.744-2.02a.022.022%200%2001.007.002%201.412%201.412%200%2000.486.087c.404%200%20.798-.166%201.095-.436a1.48%201.48%200%2000.502-1.091c0-.012%200-.023-.002-.037a1.168%201.168%200%2000.002-.063c0-.433-.2-.818-.495-1.09a1.63%201.63%200%2000-1.094-.44c-.109%200-.22.014-.328.039h-.006a1.592%201.592%200%2000-1.184%201.062v.002a1.458%201.458%200%2000-.073.459c0%20.336.111.664.303.934a1.5%201.5%200%2000.787.573zm16.865-3.924v.002a3.084%203.084%200%2001-.515%201.85%203.389%203.389%200%2001-1.203%201.115c.03.241.049.485.049.728a6.026%206.026%200%2001-1.237%203.623h-.002c-1.451%201.93-3.68%203.069-5.93%203.643l-.003.002a15.582%2015.582%200%2001-3.674.44%2014.52%2014.52%200%2001-5.406-1.022v-.002h-.002c-1.783-.734-3.482-1.902-4.523-3.613a5.892%205.892%200%2001-.869-3.061c0-.243.017-.487.05-.729a3.49%203.49%200%2001-1.178-1.086%203.201%203.201%200%2001-.552-1.639v-.009c0-.833.362-1.623.925-2.204.563-.582%201.33-.962%202.154-.962h.035a3.714%203.714%200%2001.261-.01%203.408%203.408%200%20011.223.219l.002.001h.002a4.1%204.1%200%2001.968.55c.096-.051.202-.108.32-.153%201.806-1.07%203.904-1.482%205.95-1.6.018-1.014.142-2.074.636-3.003.412-.77%201.126-1.371%201.977-1.579l.003-.002h.004a5.132%205.132%200%2001.975-.092c.864%200%201.718.205%202.517.524.354-.533.859-.95%201.452-1.184l.005-.003.006-.002a3.665%203.665%200%20011.083-.172c.39%200%20.781.07%201.149.235l.008.002c.527.203.972.578%201.288%201.043.316.469.502%201.029.502%201.605a2.756%202.756%200%2001-.018.32l-.001.001v.006c-.063.744-.44%201.397-.973%201.863a2.995%202.995%200%2001-1.947.75%202.85%202.85%200%2001-.345-.02c-.708-.055-1.369-.398-1.854-.908-.486-.508-.8-1.189-.8-1.922%200-.035.004-.072.005-.107-.665-.296-1.37-.542-2.072-.541a2.8%202.8%200%2000-.304.016h-.002a1.586%201.586%200%2000-1.25.857v.002c-.358.7-.43%201.517-.442%202.33%202.014.13%204.04.614%205.815%201.635h.003l.026.014c.033.02.096.055.152.085.122-.1.25-.201.399-.289a3.279%203.279%200%20011.814-.537c.283%200%20.567.036.842.107h.001l.012.003.01.002a3.36%203.36%200%20011.68%201.043c.443.504.74%201.14.799%201.834zm-5.93-6.589c0%20.027%200%20.055.003.084v.005c.013.35.178.675.43.915.251.24.586.39.926.391h.008c.025.002.05.002.073.002.343%200%20.683-.147.939-.387.256-.24.425-.568.438-.92v-.005a.793.793%200%2000.004-.08c0-.362-.17-.709-.436-.965a1.43%201.43%200%2000-.972-.414%201.1%201.1%200%2000-.336.05h-.007a1.485%201.485%200%2000-.756.492%201.315%201.315%200%2000-.315.832zM7.702%2013.821c-.27-.125-.547-.215-.822-.213a1.093%201.093%200%2000-.14.007h-.006l-.006.002a1.72%201.72%200%2000-1.094.458%201.522%201.522%200%2000-.512%201.056v.008a1.226%201.226%200%2000-.004.097c0%20.253.077.497.21.719.096.165.223.317.368.448.461-1.01%201.183-1.869%202.006-2.582zm17.54%204.944c0-.901-.326-1.806-.853-2.535-1.049-1.46-2.676-2.412-4.37-2.943l-.011-.004a13.78%2013.78%200%2000-.984-.263%2013.603%2013.603%200%2000-3.018-.338%2013.675%2013.675%200%2000-4.025.603c-1.693.537-3.326%201.483-4.373%202.948v.001a4.397%204.397%200%2000-.842%202.544c0%20.333.042.665.13.99h.001c.19.727.563%201.376%201.046%201.941a7.521%207.521%200%20001.696%201.444%2011.725%2011.725%200%2000.418.246c1.807%201.008%203.888%201.45%205.954%201.45.35%200%20.7-.012%201.048-.037%202.08-.171%204.17-.786%205.859-2.04v-.002a6.567%206.567%200%20001.43-1.425%204.62%204.62%200%2000.814-1.824v-.003a3.577%203.577%200%2000.079-.753zm1.641-3.585a1.345%201.345%200%2000-.16-.64l-.002-.002-.002-.004a1.562%201.562%200%2000-.653-.684%201.897%201.897%200%2000-.928-.236%201.9%201.9%200%2000-.846.197c.826.717%201.55%201.58%202.02%202.594a1.692%201.692%200%2000.375-.47c.125-.234.196-.496.196-.755z%22%20fill%3D%22%23fff%22%2F%3E%3C%2Fsvg%3E)}body{color:#2f2f2f;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6em;margin:20px auto;max-width:40rem;padding:0 1.5em;text-rendering:optimizeLegibility}h1{line-height:1.1em}h2{border-bottom:1px solid #eaecef;padding-bottom:.5em}h1,h2,h3{padding-top:.7em}.header{color:#555;margin-top:-.8em}.main a{color:#3465a4}.main a:visited{color:#75507b}.main figcaption{color:#696f72;font-style:italic;line-height:2em;text-align:center}.main img{display:block;height:auto;margin:auto;padding-bottom:1em;padding-top:1em;width:90%}.main blockquote{border-left:thin solid #d3d7cf;color:#555;margin:10px;padding:0 0 0 1em}code{background-color:#f6f8fa;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:14px;line-height:20px;padding:.2em .4em}pre code{border-radius:2%;display:block;overflow-x:auto;padding:10px}.leave-comment-btn,summary{font-size:16px;font-weight:600}.leave-comment-btn{background-color:#28a745;background-image:linear-gradient(-180deg,#34d058,#28a745 90%);border:1px solid rgba(27,31,35,.2);border-radius:.25em;color:#fff;display:inline-block;margin-top:1.5em;padding:3px 10px;text-decoration:none}.leave-comment-btn:hover{box-shadow:0 1px 3px rgba(0,0,0,.24)}summary{color:#516ae8;cursor:pointer;line-height:1.2rem;margin-top:2rem}.comments-list{list-style:none;padding:0}.comment{background-color:#fff;border:1px solid #d1d5da;border-radius:3px;color:#24292e;font-size:16px;margin:1em 0}.meta{background-color:#f6f8fa;border-bottom:1px solid #d1d5da;color:#586069}.author,.date{text-decoration:none}.author{color:#24292e!important;font-weight:700}.date{color:#586069}.date:hover{color:#0366d6}.content{padding-left:20px}.avatar,.emoji{vertical-align:middle}.avatar{display:inline-block;margin-right:5px}.emoji{height:1.1em;width:1.1em}table{border-collapse:collapse;margin:auto}td,th{border:1px solid #ddd;padding:10px}tr:hover{background-color:#f5f5f5}footer{border-top:thin solid #d3d7cf;margin:1.5em 0}.share ul{text-align:right}.share li{display:inline;padding:0 5px}.sharing{display:inline-block;height:32px;width:32px}.main a,header a{text-decoration:none}.hljs{background:#f8f8f8;color:#333;display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#6a737d;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#d73a49}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:#005cc5}.hljs-doctag,.hljs-string{color:#032f62}.hljs-section,.hljs-selector-id,.hljs-title{color:#900}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#6f42c1}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><main><header><h1><a href="../"><span>../</span></a></h1></header><h1>XMonad</h1><section class="header"><div>└─ 2013-02-14 • <em>Reading time: ~13 minutes</em></div></section><article><div class="main"><p>Étant utilisateur de GNU/Linux depuis quelques années maintenant, j’ai eu l’occasion de tester quelques distributions et quelques environnements de bureau. Parmi les distributions je suis passé par Ubuntu, Debian, Fedora pour enfin essayer Archlinux, que je n’ai plus quitté depuis. En terme d’environnement c’est un peu la même chose, gnome, xfce, lxde, openbox puis Awesome que j’ai utilisé pendant une année. Je n’ai jamais trop cherché à modifier la configuration par défaut, qui me convenait plutôt bien. Puis je me suis mis au Haskell, et avec lui des envies de refaire le monde, des envies de pureté, des envies de paresse (enfin pas tant que ça !), et j’ai ouï dire qu’il existait un gestionnaire de fenêtre écrit avec ce fabuleux langage : XMonad !</p><h2>Présentation de XMonad</h2><p>XMonad est un gestionnaire de fenêtre de style « tiling » (c’est à dire qu’il est capable de gérer tout seul la disposition des fenêtres afin d’optimiser l’espace). Il est léger, épuré, très minimaliste. En fait la première fois qu’on le lance il n’y a rien, à part un curseur de souri ! C’est un bon début. A la différence d’Awesome qui propose tout de même un minimum syndical (une barre de tâches, une vue des différents tags, l’heure…). Sur XMonad rien de tout ça. J’ai vraiment eu l’impression qu’on me fournissait des briques de base, et qu’ensuite c’était à moi de jouer pour me construire mon propre gestionnaire de fenêtre, et c’est en quelque sorte ce que j’ai fait. Heureusement les ressources se trouvent assez facilement sur internet, à partir de la documentation, d’articles et d’exemples, on parvient à créer un petit environnement douillet en quelques heures (à condition de connaitre quelques bribes de Haskell, car oui, XMonad se configure en Haskell !). Au final, il n’y a pas à dire, c’est un gestionnaire de fenêtre fonctionnel.</p><h2>Installation</h2><p>Pour les utilisateur de Archlinux il suffit d’exécuter la commande suivante ! Pour les autres, un petit tour par la documentation de votre distribution favorite devrait vous éguiller.</p><pre class="code" data-lang="sh"><code>$ pacman -S xmonad xmonad-contrib
</code></pre><h2>Configuration</h2><p>Venons-en aux sujets qui fâchent, à savoir, la configuration. Comme dit un peu plus haut, ça se fait en utilisant le langage Haskell et on place tout ça dans un fichier nommé xmonad.hs dans un dossier ~/.xmonad. Puisque c’est du Haskell, vous l’aurez deviné, ça se compile. Heureusement cela se fait à chaud, sans avoir besoin de quitter XMonad, ce qui est très appréciable. Grâce au raccourci Mod</p><ul><li>q le fichier de configuration est recompilé, si il est correct il est appliqué à chaud, sinon une fenêtre s’ouvre vous indiquant les éventuelles erreurs, et l’ancienne configuration est conservée. Comme ça, pas de risque de casser votre environnement en le modifiant en cours d’utilisation.</li></ul><p>Je vais vous présenter ma configuration actuelle, qui est assez basique, mais comble amplement mes attentes. Ensuite je vais détailler quelques points importants.</p><pre class="code" data-lang="haskell"><code><span class="hljs-comment">{- Config of berson_r -}</span>

<span class="hljs-keyword">import</span> System.Exit
<span class="hljs-keyword">import</span> System.IO
<span class="hljs-keyword">import</span> XMonad
<span class="hljs-keyword">import</span> XMonad.Actions.CycleWS
<span class="hljs-keyword">import</span> XMonad.Actions.GridSelect
<span class="hljs-keyword">import</span> XMonad.Hooks.DynamicLog
<span class="hljs-keyword">import</span> XMonad.Hooks.ManageDocks
<span class="hljs-keyword">import</span> XMonad.Layout.Fullscreen
<span class="hljs-keyword">import</span> XMonad.Layout.NoBorders
<span class="hljs-keyword">import</span> XMonad.Layout.Spiral
<span class="hljs-keyword">import</span> XMonad.Layout.Tabbed
<span class="hljs-keyword">import</span> XMonad.Util.EZConfig(<span class="hljs-title">additionalKeys</span>)
<span class="hljs-keyword">import</span> XMonad.Util.Run(<span class="hljs-title">spawnPipe</span>)
<span class="hljs-keyword">import</span> <span class="hljs-keyword">qualified</span> Data.Map        <span class="hljs-keyword">as</span> M
<span class="hljs-keyword">import</span> <span class="hljs-keyword">qualified</span> XMonad.StackSet <span class="hljs-keyword">as</span> W


<span class="hljs-comment">-- Main</span>
<span class="hljs-title">main</span> = <span class="hljs-keyword">do</span>
    xmproc &lt;- spawnPipe <span class="hljs-string">&quot;xmobar /home/berson_r/.xmobarrc&quot;</span> <span class="hljs-comment">-- lance xmobar avec le bon fichier de config</span>
    spawn <span class="hljs-string">&quot;nitrogen --restore&quot;</span> <span class="hljs-comment">-- affiche le fond d&#x27;écran</span>
    xmonad $ defaultConfig { <span class="hljs-comment">-- redéfinition de certaines options de XMonad</span>
    <span class="hljs-comment">-- simple stuff</span>
    terminal           = myTerminal,
    modMask            = myModMask,
    workspaces         = myWorkspaces,
    normalBorderColor  = myNormalBorderColor,
    focusedBorderColor = myFocusedBorderColor,

    <span class="hljs-comment">-- key bindings</span>
    keys               = myKeys,
    <span class="hljs-comment">-- mouseBindings      = myMouseBindings,</span>

    <span class="hljs-comment">-- hooks, layouts</span>
    layoutHook         = smartBorders $ myLayout,
    manageHook         = myManageHook,
    logHook            = myLogHook xmproc,
    startupHook        = myStartupHook
    }


<span class="hljs-comment">-- Binding for the mod key</span>
<span class="hljs-title">myModMask</span> :: <span class="hljs-type">KeyMask</span>
<span class="hljs-title">myModMask</span> = mod4Mask

<span class="hljs-comment">-- Default terminal to use</span>
<span class="hljs-title">myTerminal</span> :: <span class="hljs-type">String</span>
<span class="hljs-title">myTerminal</span> = <span class="hljs-string">&quot;urxvt&quot;</span>

<span class="hljs-comment">-- Names of the workspaces</span>
<span class="hljs-title">myWorkspaces</span> :: [<span class="hljs-type">String</span>]
<span class="hljs-title">myWorkspaces</span> = [<span class="hljs-string">&quot;term&quot;</span>, <span class="hljs-string">&quot;web&quot;</span>, <span class="hljs-string">&quot;mail&quot;</span>, <span class="hljs-string">&quot;music&quot;</span>] ++ (map show [<span class="hljs-number">5</span>..<span class="hljs-number">9</span>])

<span class="hljs-comment">-- Color of normal borders</span>
<span class="hljs-title">myNormalBorderColor</span> :: <span class="hljs-type">String</span>
<span class="hljs-title">myNormalBorderColor</span>  = <span class="hljs-string">&quot;#7c7c7c&quot;</span>

<span class="hljs-comment">-- Color of the selected window&#x27;s borders</span>
<span class="hljs-title">myFocusedBorderColor</span> :: <span class="hljs-type">String</span>
<span class="hljs-title">myFocusedBorderColor</span> = <span class="hljs-string">&quot;#ffb6b0&quot;</span>

<span class="hljs-comment">-- Color of current window title in xmobar.</span>
<span class="hljs-title">xmobarTitleColor</span> :: <span class="hljs-type">String</span>
<span class="hljs-title">xmobarTitleColor</span> = <span class="hljs-string">&quot;#FFB6B0&quot;</span>

<span class="hljs-comment">-- -- Color of current workspace in xmobar.</span>
<span class="hljs-title">xmobarCurrentWorkspaceColor</span> :: <span class="hljs-type">String</span>
<span class="hljs-title">xmobarCurrentWorkspaceColor</span> = <span class="hljs-string">&quot;#CEFFAC&quot;</span>

<span class="hljs-comment">-- Custom layout</span>
<span class="hljs-title">myLayout</span> = avoidStruts (
    <span class="hljs-type">Tall</span> <span class="hljs-number">1</span> (<span class="hljs-number">3</span>/<span class="hljs-number">100</span>) (<span class="hljs-number">1</span>/<span class="hljs-number">2</span>) |||
    <span class="hljs-type">Mirror</span> (<span class="hljs-type">Tall</span> <span class="hljs-number">1</span> (<span class="hljs-number">3</span>/<span class="hljs-number">100</span>) (<span class="hljs-number">1</span>/<span class="hljs-number">2</span>)) |||
    tabbed shrinkText tabConfig |||
    <span class="hljs-type">Full</span> |||
    spiral (<span class="hljs-number">6</span>/<span class="hljs-number">7</span>)) |||
    noBorders (fullscreenFull <span class="hljs-type">Full</span>)

<span class="hljs-comment">-- Colors for text and backgrounds of each tab when in &quot;Tabbed&quot; layout.</span>
<span class="hljs-title">tabConfig</span> = defaultTheme {
    activeBorderColor = <span class="hljs-string">&quot;#7C7C7C&quot;</span>,
    activeTextColor = <span class="hljs-string">&quot;#CEFFAC&quot;</span>,
    activeColor = <span class="hljs-string">&quot;#000000&quot;</span>,
    inactiveBorderColor = <span class="hljs-string">&quot;#7C7C7C&quot;</span>,
    inactiveTextColor = <span class="hljs-string">&quot;#EEEEEE&quot;</span>,
    inactiveColor = <span class="hljs-string">&quot;#000000&quot;</span>
}


<span class="hljs-title">myStartupHook</span> = return ()

<span class="hljs-comment">-- Custom rules</span>
<span class="hljs-title">myManageHook</span> :: <span class="hljs-type">ManageHook</span>
<span class="hljs-title">myManageHook</span> = composeAll
    [ className =? <span class="hljs-string">&quot;Chromium&quot;</span>       --&gt; doShift <span class="hljs-string">&quot;web&quot;</span>
    , className =? <span class="hljs-string">&quot;Firefox&quot;</span>        --&gt; doShift <span class="hljs-string">&quot;web&quot;</span>
    , className =? <span class="hljs-string">&quot;Uzbl-core&quot;</span>      --&gt; doShift <span class="hljs-string">&quot;web&quot;</span>
    , className =? <span class="hljs-string">&quot;Thunderbird&quot;</span>    --&gt; doShift <span class="hljs-string">&quot;mail&quot;</span>
    , className =? <span class="hljs-string">&quot;Spotify&quot;</span>        --&gt; doShift <span class="hljs-string">&quot;music&quot;</span>
    , className =? <span class="hljs-string">&quot;Vlc&quot;</span>            --&gt; doFloat
    , className =? <span class="hljs-string">&quot;Steam&quot;</span>          --&gt; doFloat
    , className =? <span class="hljs-string">&quot;Gimp&quot;</span>           --&gt; doFloat
    , manageDocks]
<span class="hljs-comment">--    , isFullscreen --&gt; (doF W.focusDown &lt;+&gt; doFullFloat)]</span>

<span class="hljs-title">myLogHook</span> :: <span class="hljs-type">Handle</span> -&gt; <span class="hljs-type">X</span> ()
<span class="hljs-title">myLogHook</span> xmproc = dynamicLogWithPP xmobarPP {
    ppOutput = hPutStrLn xmproc,
    ppTitle = xmobarColor <span class="hljs-string">&quot;green&quot;</span> <span class="hljs-string">&quot;&quot;</span> . shorten <span class="hljs-number">50</span>
}


<span class="hljs-comment">-- Key bindings --</span>
<span class="hljs-title">myKeys</span> conf@(<span class="hljs-type">XConfig</span> {<span class="hljs-type">XMonad</span>.modMask = modMask}) = <span class="hljs-type">M</span>.fromList $

  <span class="hljs-comment">-- Custom key bindings</span>

  [ ((modMask .|. shiftMask, xK_Return), spawn $ <span class="hljs-type">XMonad</span>.terminal conf) <span class="hljs-comment">-- start term</span>
  , ((modMask, xK_r), spawn <span class="hljs-string">&quot;exe=`dmenu_path_c | yeganesh` &amp;&amp; eval \&quot;exec $exe\&quot;&quot;</span>) <span class="hljs-comment">-- dmenu</span>
  , ((modMask .|. controlMask, xK_m), spawn <span class="hljs-string">&quot;amixer -q set Master toggle&quot;</span>) <span class="hljs-comment">-- mute volume</span>
  , ((modMask .|. controlMask, xK_j), spawn <span class="hljs-string">&quot;amixer -q set Master 10%-&quot;</span>) <span class="hljs-comment">-- dec volume</span>
  , ((modMask .|. controlMask, xK_k), spawn <span class="hljs-string">&quot;amixer -q set Master 10%+&quot;</span>) <span class="hljs-comment">-- inc volume</span>
  , ((modMask, xK_g), goToSelected defaultGSConfig) <span class="hljs-comment">-- display selection grid</span>
  <span class="hljs-comment">-- workspaces</span>
  , ((modMask, xK_Right), nextWS)
  , ((modMask .|. shiftMask, xK_Right), shiftToNext)
  , ((modMask, xK_Left), prevWS)
  , ((modMask .|. shiftMask, xK_Left), shiftToPrev)

  <span class="hljs-comment">-- &quot;Standard&quot; xmonad key bindings</span>

  , ((modMask .|. shiftMask, xK_c), kill) <span class="hljs-comment">-- close selected window</span>
  , ((modMask, xK_space), sendMessage <span class="hljs-type">NextLayout</span>) <span class="hljs-comment">-- change layout</span>
  , ((modMask .|. shiftMask, xK_space), setLayout $ <span class="hljs-type">XMonad</span>.layoutHook conf) <span class="hljs-comment">-- reset layout</span>
  , ((modMask, xK_n), refresh) <span class="hljs-comment">-- resize windows to the correct size</span>
  , ((modMask, xK_Tab), windows <span class="hljs-type">W</span>.focusDown) <span class="hljs-comment">-- move focus to next window</span>
  , ((modMask, xK_j),   windows <span class="hljs-type">W</span>.focusDown) <span class="hljs-comment">-- move focus to next window</span>
  , ((modMask, xK_k),   windows <span class="hljs-type">W</span>.focusUp)   <span class="hljs-comment">-- move focus to previous window</span>
  , ((modMask, xK_m),   windows <span class="hljs-type">W</span>.focusMaster) <span class="hljs-comment">-- move focus to master window</span>
  , ((modMask, xK_Return), windows <span class="hljs-type">W</span>.swapMaster) <span class="hljs-comment">-- swap focused and master window</span>
  , ((modMask .|. shiftMask, xK_j), windows <span class="hljs-type">W</span>.swapDown) <span class="hljs-comment">-- swap focused and next window</span>
  , ((modMask .|. shiftMask, xK_k), windows <span class="hljs-type">W</span>.swapUp) <span class="hljs-comment">-- swap focused and previous window</span>

  <span class="hljs-comment">-- Shrink the master area.</span>
  , ((modMask, xK_h),
     sendMessage <span class="hljs-type">Shrink</span>)

  <span class="hljs-comment">-- Expand the master area.</span>
  , ((modMask, xK_l),
     sendMessage <span class="hljs-type">Expand</span>)

  <span class="hljs-comment">-- Push window back into tiling.</span>
  , ((modMask, xK_t),
     withFocused $ windows . <span class="hljs-type">W</span>.sink)

  <span class="hljs-comment">-- Increment the number of windows in the master area.</span>
  , ((modMask, xK_comma),
     sendMessage (<span class="hljs-type">IncMasterN</span> <span class="hljs-number">1</span>))

  <span class="hljs-comment">-- Decrement the number of windows in the master area.</span>
  , ((modMask, xK_period),
     sendMessage (<span class="hljs-type">IncMasterN</span> (-<span class="hljs-number">1</span>)))

  <span class="hljs-comment">-- Toggle the status bar gap.</span>
  <span class="hljs-comment">-- <span class="hljs-doctag">TODO:</span> update this binding with avoidStruts, ((modMask, xK_b),</span>

  <span class="hljs-comment">-- Quit xmonad.</span>
  , ((modMask .|. shiftMask, xK_q),
     io (exitWith <span class="hljs-type">ExitSuccess</span>))

  <span class="hljs-comment">-- Restart xmonad.</span>
  , ((modMask, xK_q),
     restart <span class="hljs-string">&quot;xmonad&quot;</span> <span class="hljs-type">True</span>)
  ]
  ++

  <span class="hljs-comment">-- mod-[1..9], Switch to workspace N</span>
  <span class="hljs-comment">-- mod-shift-[1..9], Move client to workspace N</span>
  [((m .|. modMask, k), windows $ f i)
      | (i, k) &lt;- zip (<span class="hljs-type">XMonad</span>.workspaces conf) [xK_1 .. xK_9]
      , (f, m) &lt;- [(<span class="hljs-type">W</span>.greedyView, <span class="hljs-number">0</span>), (<span class="hljs-type">W</span>.shift, shiftMask)]]
  ++

  <span class="hljs-comment">-- mod-{w,e,r}, Switch to physical/Xinerama screens 1, 2, or 3</span>
  <span class="hljs-comment">-- mod-shift-{w,e,r}, Move client to screen 1, 2, or 3</span>
  [((m .|. modMask, key), screenWorkspace sc &gt;&gt;= flip whenJust (windows . f))
      | (key, sc) &lt;- zip [xK_w, xK_e, xK_p] [<span class="hljs-number">0</span>..]
      , (f, m) &lt;- [(<span class="hljs-type">W</span>.view, <span class="hljs-number">0</span>), (<span class="hljs-type">W</span>.shift, shiftMask)]]
</code></pre><p>Globalement, on peut résumer l’organisation du fichier de configuration comme ceci :</p><ol><li>Les imports permettant de faire appel à des fonctionnalités de XMonad, ou toute autre bibliothèque Haskell (car vous pouvez vraiment mettre n’importe quoi dans votre fichier de configuration, si vous le vouliez vous pourriez coder factorielle, Fibonacci et un crible d’Ératosthène pour les afficher dans votre barre des tâches, aucun problème !).</li><li>Des redéfinitions d’options ou de comportements sous forme de constantes.</li><li>Une fonction Main qui regroupe tout ceci et spécifie à XMonad toutes les options, et les comportements que vous désirez. Globalement vous pourrez quasiment tout modifier via un type enregistrement. Les champs non spécifiés auront leur valeur par défaut, on se contente donc de spécifier ce qui nous intéresse.</li></ol><h2>Barre d’état</h2><p>Par défaut, XMonad ne dispose pas d’une barre des tâches. Il en existe une qui est également en Haskell et qui s’intègre très simplement avec XMonad, il s’agit de XMobar. Elle est très légère et permettra de répondre à la plupart des besoins. Il suffit pour la mettre en place de :</p><ol><li>Disposer d’un fichier de configuration situé ici : <code>~/.xmobarrc</code> (vous trouverez le mien un peu plus bas)</li><li>Rajouter la ligne : <code>xmproc &lt;- spawnPipe &quot;xmobar /home/berson_r/.xmobarrc</code> en haut de votre fonction main (cf mon fichier de configuration ci-dessus).</li><li>Indiquer quelles informations XMonad doit transmettre à XMobar lors de l’exécution (les workspaces par exemple). Pour ceci il faut redéfinir le myLogHook dans le main, je vous invite encore une fois à regarder mon exemple donné un peu plus haut.</li></ol><pre class="code" data-lang="haskell"><code><span class="hljs-type">Config</span> { font = <span class="hljs-string">&quot;-*-Fixed-Bold-R-Normal-*-13-*-*-*-*-*-*-*&quot;</span>
, bgColor = <span class="hljs-string">&quot;black&quot;</span>
, fgColor = <span class="hljs-string">&quot;grey&quot;</span>
, position = <span class="hljs-type">TopW</span> <span class="hljs-type">L</span> <span class="hljs-number">90</span>
, lowerOnStart = <span class="hljs-type">True</span>
, commands = [ <span class="hljs-type">Run</span> <span class="hljs-type">Date</span> <span class="hljs-string">&quot;%a %b %_d %H:%M&quot;</span> <span class="hljs-string">&quot;date&quot;</span> <span class="hljs-number">10</span>
, <span class="hljs-type">Run</span> <span class="hljs-type">StdinReader</span>
]
, sepChar = <span class="hljs-string">&quot;%&quot;</span>
, alignSep = <span class="hljs-string">&quot;}{&quot;</span>
, template = <span class="hljs-string">&quot;%StdinReader% }{ &lt;fc=#ee9a00&gt;%date%&lt;/fc&gt; =&lt;&lt;&quot;</span>
}
</code></pre><p>Attention, contrairement aux apparences, ce n’est pas du Haskell, donc ne mettez pas de commentaires dans ce fichier. Une fois les deux étapes décrites plus hauts effectuées, xmobar devrait s’afficher au lancement de XMonad. Vous remarquerez qu’il affiche les workspaces, l’application qui a le focus, l’heure, la date et … c’est tout. En plus il y a un espace de 10% de la taille de l’écran sur la droite. Il servira à mettre un trayer. C’est justement l’objet de la section suivante.</p><h2>System Tray</h2><p>Par défaut, ni XMonad ni xmobar ne proposent un « trayer », où vous pourriez voir les icônes des applications en cours d’exécution. Pour cela j’utilise trayer, qui est très léger et facile à mettre en place. En fait, une fois qu’on lui a réservé une petite place (ce qui est notre cas), il suffit de le lancer avec les bonnes options depuis notre .xinitrc (ou .Xsessions). Voici la commande telle que je l’utilise :</p><pre class="code" data-lang="sh"><code>trayer --SetDockType <span class="hljs-literal">true</span>       \
       --SetPartialStrut <span class="hljs-literal">true</span>   \
       --align right            \
       --alpha 0                \
       --edge top               \
       --<span class="hljs-built_in">expand</span> <span class="hljs-literal">true</span>            \
       --height 12              \
       --heighttype pixel       \
       --tint 0x000000          \
       --transparent <span class="hljs-literal">true</span>       \
       --width 10 &amp;
</code></pre><h2>Fond d’écran</h2><p>Vous l’aurez compris, XMonad ne propose pas non plus par défaut d’utilitaire pour changer l’image ou la couleur du fond d’écran. Mais il est relativement simple d’en mettre un en place. J’ai personnellement utilisé nitrogen. Il est très simple à utiliser, la première fois il suffit de le lancer à la main et d’aller chercher le fond d’écran désiré. Ensuite, il suffira de le relancer à chaque démmarage avec la commande :</p><pre class="code" data-lang="sh"><code>nitrogen --restore &amp;
</code></pre><p>Et c’est exactement le rôle de la ligne 23 dans la fonction main du fichier <code>xmonad.hs</code> :</p><pre class="code" data-lang="haskell"><code><span class="hljs-title">spawn</span> <span class="hljs-string">&quot;nitrogen --restore&quot;</span>
</code></pre><h2>Raccourcies clavier utiles</h2><p>Le seul raccourci qu’il me manquait afin que ce soit parfait, était le <code>« mod + flèche »</code> afin de se déplacer sur le workspace de droite ou de gauche. Pour ce faire, il suffit de rajouter les lignes suivantes dans le tableau des raccourcis personnalisés :</p><pre class="code" data-lang="haskell"><code>, ((modMask, xK_Right), nextWS)
, ((modMask .|. shiftMask, xK_Right), shiftToNext)
, ((modMask, xK_Left), prevWS)
, ((modMask .|. shiftMask, xK_Left), shiftToPrev)
</code></pre><p>Il y a d’autres options que je n’ai pas détaillées dans cet article, mais j’ai laissé quelques commentaires dans le fichier de configuration afin de guider la compréhension. Si jamais ils ne sont pas suffisents, n’hésitez pas à laisser un commentaire pour poser une question, ou faire une remarque.</p></div><div class="comments"></div></article><footer><div class="share"><ul><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://remusao.github.io/posts/xmonad.html&t=XMonad" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><div class="sharing sharing-facebook"></div></a></li><li><a href="https://twitter.com/share?url=https://remusao.github.io/posts/xmonad.html&text=XMonad&via=Pythux" title="Tweet" target="_blank" rel="noopener noreferrer"><div class="sharing sharing-twitter"></div></a></li><li><a href="https://getpocket.com/save?url=https://remusao.github.io/posts/xmonad.html&title=XMonad" title="Add to Pocket" target="_blank" rel="noopener noreferrer"><div class="sharing sharing-pocket"></div></a></li><li><a href="https://news.ycombinator.com/submitlink?u=https://remusao.github.io/posts/xmonad.html&t=XMonad" title="Submit to Hacker News" target="_blank" rel="noopener noreferrer"><div class="sharing sharing-hackernews"></div></a></li><li><a href="https://www.reddit.com/submit?url=https://remusao.github.io/posts/xmonad.html&title=XMonad" title="Submit to Reddit" target="_blank" rel="noopener noreferrer"><div class="sharing sharing-reddit"></div></a></li></ul></div></footer></main></body></html>