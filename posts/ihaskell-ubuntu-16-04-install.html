<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>Installing IHaskell on Ubuntu 16.04 with Stack</title><meta name="description" content="Simplex Sigillum Veri"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><link rel="canonical" href="https://remusao.github.io/posts/ihaskell-ubuntu-16-04-install.html"><link rel="icon" type="image/x-icon" href="/images/favicon.ico"><style type="text/css">body{color:#2f2f2f;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen-Sans,Ubuntu,Cantarell,'Helvetica Neue',sans-serif;line-height:1.6em;margin:20px auto;max-width:40rem;padding:0 1.5em;text-rendering:optimizeLegibility}h1{line-height:1.1em}h2{border-bottom:1px solid #eaecef;padding-bottom:.5em}h1,h2,h3{padding-top:.7em}.header{color:#555;margin-top:-.8em}.main a{color:#3465a4}.main a:visited{color:#75507b}.main figcaption{color:#696f72;font-style:italic;line-height:2em;text-align:center}.main img{display:block;height:auto;margin:auto;padding-bottom:1em;padding-top:1em;width:90%}.main blockquote{border-left:thin solid #d3d7cf;color:#555;margin:10px;padding:0 0 0 1em}code{background-color:#f6f8fa;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:14px;line-height:20px;padding:.2em .4em}pre code{display:block;overflow-x:auto}.leave-comment-btn,summary{font-size:16px;font-weight:600}.leave-comment-btn{background-color:#28a745;background-image:linear-gradient(-180deg,#34d058,#28a745 90%);border:1px solid rgba(27,31,35,.2);border-radius:.25em;color:#fff;display:inline-block;margin-top:1.5em;padding:3px 10px;text-decoration:none}.leave-comment-btn:hover{box-shadow:0 1px 3px rgba(0,0,0,.24)}summary{color:#516ae8;cursor:pointer;line-height:1.2rem;margin-top:2rem}.comments-list{list-style:none;padding:0}.comment{background-color:#fff;border:1px solid #d1d5da;border-radius:3px;color:#24292e;font-size:16px;margin:1em 0}.meta{background-color:#f6f8fa;border-bottom:1px solid #d1d5da;color:#586069}.author,.date{text-decoration:none}.author{color:#24292e!important;font-weight:700}.date{color:#586069}.date:hover{color:#0366d6}.content{padding-left:20px}.avatar,.emoji{vertical-align:middle}.avatar{display:inline-block;margin-right:5px}.emoji{height:1.1em;width:1.1em}table{border-collapse:collapse;margin:auto}td,th{border:1px solid #ddd;padding:10px}tr:hover{background-color:#f5f5f5}footer{border-top:thin solid #d3d7cf;margin:1.5em 0}.share ul{text-align:right}.share li{display:inline;padding:0 5px}.share img{width:2em}.main a,header a{text-decoration:none}.hljs{background:#f8f8f8;color:#333;display:block;overflow-x:auto;padding:.5em}.hljs-comment,.hljs-quote{color:#6a737d;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#d73a49}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:#005cc5}.hljs-doctag,.hljs-string{color:#032f62}.hljs-section,.hljs-selector-id,.hljs-title{color:#900}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#6f42c1}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style></head><body><main><header><h1><a href="../"><span>../</span></a></h1></header><h1>Installing IHaskell on Ubuntu 16.04 with Stack</h1><section class="header"><div>└─ 2017-10-07 • <em>Reading time: ~4 minutes</em></div></section><article><div class="main"><p>Last year I wrote a tutorial to install iHaskell on Ubuntu 14.04. Since it’s a bit out-dated now, but I still think iHaskell can be super useful, I decided to update it for Ubuntu 16.04.</p><p>Before we start, please be aware that you can use IHaskell directly in your browser by visiting this website: <a href="https://try.jupyter.org/">try.jupyter.org</a>. The following tutorial is only meant for those who want IHaskell to run locally.</p><h2 id="install-stack">Install Stack</h2><p>Compared to Ubuntu 14.04, it is now easier to install <code>stack</code> thanks to the <code>haskell-stack</code> package:</p><pre><code class="language-sh">$ sudo apt-get install haskell-stack</code></pre><p>Now let’s make sure we have the latest version of stack, as well as the latest snapshot from <a href="stackage.org/lts">stackage</a>:</p><pre><code class="language-sh">$ stack upgrade
$ stack update
$ stack setup</code></pre><h2 id="dependencies">Dependencies</h2><p>Some <a href="https://github.com/gibiansky/IHaskell#linux">dependencies</a> are required before building the IHaskell kernel, let’s install them:</p><pre><code class="language-sh">$ sudo apt-get install -y   \
    git                     \
    libtinfo-dev            \
    libzmq3-dev             \
    libcairo2-dev           \
    libpango1.0-dev         \
    libmagic-dev            \
    libblas-dev             \
    liblapack-dev</code></pre><h2 id="install-jupyter">Install Jupyter</h2><p>IHaskell requires a recent version of <em>Jupyter</em>, so we need to install it ourselves. There are several options:</p><ol><li>Use pip and install it globally (<code>pip install jupyter</code>)</li><li><strong>Use pip and install it in a <a href="https://virtualenv.pypa.io/en/stable/"><code>virtualenv</code></a></strong></li><li>Use <a href="https://nixos.org/nix/">nix</a> <em>(You’re on your own)</em></li><li>Use <a href="https://www.continuum.io/downloads">conda</a> (<code>conda update jupyter</code>)</li></ol><p>Let’s go with option <code>2.</code>. I usually never install python packages globally using <code>sudo pip</code>, and prefer to create a fresh <a href="https://virtualenv.pypa.io/en/stable/"><code>virtualenv</code></a> for each project. Let’s proceed!</p><p>If you’re on a fresh install, we need to install virtualenv first:</p><pre><code class="language-sh">$ sudo apt-get install virtualenv python3-dev ncurses-base</code></pre><p>Then let’s install <code>jupyter</code> inside of our virtualenv <code>virtualenv</code>:</p><pre><code class="language-sh">$ virtualenv venv-ihaskell -p /usr/bin/python3 <span class="hljs-comment"># Create a virtualenv</span>
$ <span class="hljs-built_in">source</span> venv-ihaskell/bin/activate <span class="hljs-comment"># Active it</span>
$ pip install                                   \
    jupyter==1.0.0                              \
    jupyter-contrib-core==0.3.3                 \
    jupyter-contrib-nbextensions==0.3.1         \
    jupyter-highlight-selected-word==0.0.11     \
    jupyter-latex-envs==1.3.8.4                 \
    jupyter-nbextensions-configurator==0.2.8</code></pre><h2 id="install-ihaskell">Install IHaskell</h2><p>Since IHaskell is not available in the latest stackage LTS snapshot, we have two options to install it:</p><ul><li>Compile from source</li><li>Use the latest snapshot supporting IHaskell (<code>lts-6.35</code>)</li></ul><p>I will present both methods.</p><h3 id="from-source">From source</h3><p>The instructions can be found in the github <a href="https://github.com/gibiansky/IHaskell#linux">repository</a>:</p><blockquote><pre><code class="language-sh">$ <span class="hljs-built_in">source</span> ihaskell-venv/bin/activate
$ git <span class="hljs-built_in">clone</span> git@github.com:gibiansky/IHaskell.git
$ <span class="hljs-built_in">cd</span> IHaskell
$ pip install -r requirements.txt
$ stack setup
$ stack install gtk2hs-buildtools
$ stack install --fast
$ stack <span class="hljs-built_in">exec</span> ihaskell -- install --stack</code></pre></blockquote><p>Then it can be started using:</p><pre><code class="language-sh">$ stack <span class="hljs-built_in">exec</span> jupyter -- notebook</code></pre><h3 id="from-stackage-lts-635">From stackage lts-6.35</h3><p>Unfortunately, it is not possible to build IHaskell using the latest snapshot, as it does not seem to work with GHC 8.x. The latest supported LTS snapshot is <code>6.35</code>, so we will have to specify it explicitly:</p><pre><code class="language-sh">$ stack --resolver lts-6.35 setup --install-ghc
$ stack --resolver lts-6.35 install ihaskell
$ stack --resolver lts-6.35 <span class="hljs-built_in">exec</span> ihaskell -- install --stack</code></pre><p>You may want to install extra packages to enhance <em>IHaskell</em>‘s capabilities. Here are the ones supported by stackage:</p><ul><li><code>ihaskell-aeson</code></li><li><code>ihaskell-basic</code></li><li><code>ihaskell-blaze</code></li><li><code>ihaskell-charts</code></li><li><code>ihaskell-diagrams</code></li><li><code>ihaskell-hatex</code></li><li><code>ihaskell-inline-r</code></li><li><code>ihaskell-juicypixels</code></li><li><code>ihaskell-magic</code></li><li><code>ihaskell-rlangqq</code></li></ul><p>Some others are not in the snapshot, but could be very useful and can probably be installed from source:</p><ul><li><code>ihaskell-widgets</code></li><li><code>ihaskell-parsec</code></li><li><code>ihaskell-plot</code></li></ul><h2 id="whats-next">What’s next</h2><p>The installation of IHaskell on Ubuntu 16.04 is a bit easier than on 14.04 thanks to more up-to-date dependencies. Unfortunately, the latest IHaskell is not available on stackage LTS, which requires to use an older snapshot (<code>6.35</code>). It is still possible to build IHaskell from source, which allows you to run the latest version of the code! It’s up to you to choose the method you prefer.</p></div><div class="comments"></div></article><footer><div class="share"><ul><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://remusao.github.io//posts/ihaskell-ubuntu-16-04-install.html&t=Installing IHaskell on Ubuntu 16.04 with Stack" title="Share on Facebook" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Share on Facebook" src="/images/social_flat_rounded_rects_svg/Facebook.svg"><a></a></li><li><a href="https://twitter.com/share?url=https://remusao.github.io//posts/ihaskell-ubuntu-16-04-install.html&text=Installing IHaskell on Ubuntu 16.04 with Stack&via=Pythux" title="Tweet" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Tweet" src="/images/social_flat_rounded_rects_svg/Twitter.svg"><a></a></li><li><a href="https://getpocket.com/save?url=https://remusao.github.io//posts/ihaskell-ubuntu-16-04-install.html&title=Installing IHaskell on Ubuntu 16.04 with Stack" title="Add to Pocket" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Add to Pocket" src="/images/social_flat_rounded_rects_svg/Pocket.svg"><a></a></li><li><a href="https://news.ycombinator.com/submitlink?u=https://remusao.github.io//posts/ihaskell-ubuntu-16-04-install.html&t=Installing IHaskell on Ubuntu 16.04 with Stack" title="Submit to Hacker News" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Hacker News" src="/images/social_flat_rounded_rects_svg/HackerNews.svg"><a></a></li><li><a href="https://www.reddit.com/submit?url=https://remusao.github.io//posts/ihaskell-ubuntu-16-04-install.html&title=Installing IHaskell on Ubuntu 16.04 with Stack" title="Submit to Reddit" target="_blank" rel="noopener noreferrer"><img loading="lazy" alt="Submit to Reddit" src="/images/social_flat_rounded_rects_svg/Reddit.svg"><a></a></li></ul></div></footer></main></body></html>